# ðŸ“‘ Wave 4 - Council Democracy MVP Ledger Patch
**Label**: autonomous  
**Guardian**: Will scaffold stubs and merge green PRs  
**Objective**: Transform Council from "loose chat" to democratic tie-breaker  

## ðŸŽ¯ **Missing Links â†’ New Work**

| Missing Link | Why We Need It | Where Pieces Live | New Work |
|--------------|----------------|-------------------|----------|
| Complete Round-Table code | Council is "loose chat"; no enforced order | round_table.py stub; flow-chart spec | RTB-100 â€¦ RTB-140 |
| Council-as-tie-breaker gate | External Sonnet Î±/Î² + Î¦-3 quorum disagree; merge stalls | PatchCtl merge_policy scaffold | QA-400 |
| Persona-isolated memory pools | Need "one-brain, many-hats" without context bleed | FAISS writer/reader deployed | MEM-720 |
| vLLM batching / int4 speed-up | 1-3 tok/s bottleneck; target â‰¥30 tok/s | vLLM bench + INT-4 path | PERF-610 |
| Router fast-path tune | 100ms good, but spikes when â‰¥5 voices | Router health fixed, no adaptive depth | FIX-915 |

---

## ðŸ“‹ **TICKET BREAKDOWN**

| ID | Owner | Deliverable | KPI / Gate | Effort |
|----|-------|-------------|------------|--------|
| **RTB-100** | Builder | round_table.py heapq + cut-off task | floor_overrun_total == 0 | 0.5 d |
| **RTB-110** | DevOps | NATS adapter council.talk / council.turn.* | RTT < 50 ms @200 QPS | 0.25 d |
| **RTB-120** | QA | Prom rules floor_overrun & consensus_wait_sec | alerts green in CI | 0.1 d |
| **RTB-130** | FE | Grafana "Council Rounds" board | panel refresh < 2 s | 0.1 d |
| **RTB-140** | Guardian | veto hook â†’ auto-revert on fail | veto_count_total rises | 0.25 d |
| **QA-400** | Builder | PatchCtl council_vote_required:true | patch_wait_sec < 60 | 0.2 d |
| **MEM-720** | Soldier-C | Persona pocket-memory layer (Redis hash per voice) | mem_isolation_ok == 1 | 0.3 d |
| **PERF-610** | Soldier-A | vLLM batch + streaming; INT-4 all voices | voice_tokps_avg â‰¥ 30 | 0.3 d |
| **FIX-915** | Soldier-B | Router adaptive depth (confidence window) | router_escalation_rate < 0.2 | 0.2 d |

**Total Effort**: 2.35 days  
**Expected Completion**: Wave 4 sprint  

---

## ðŸ—³ï¸ **COUNCIL TIE-BREAKER FLOW**

### **Trigger**: PatchCtl sees diff > 3%
1. **Publish**: `council.vote.request` with `patch_id`
2. **Round-Table Opens**: 30s round with enforced order
   - Strategist â†’ Auditor â†’ Summariser â†’ Architect personas
3. **Voting**: Each voice publishes STATEMENT vote (for/against/neutral) to `council.talk`
4. **Decision**: When â‰¥50% are "for", Moderator emits `council.vote.pass` (or fail)
5. **Action**: PatchCtl merges or auto-reverts; Guardian can still veto

### **Democracy Enforcement**
- **Priority Heap**: Ensures speaking order
- **Cut-off Timer**: Prevents floor overruns
- **Vote Tally**: Democratic majority rules
- **Guardian Veto**: Final safety override

---

## ðŸŽ¯ **GUARDIAN GATE CONDITIONS**

```makefile
voice_tokps_ok == 1 &
router_escalation_rate < 0.2 &
mem_isolation_ok == 1
```

**Hold Duration**: 900s (15 minutes)  
**Result**: Council-Democracy MVP ðŸŸ¢ â†’ PatchCtl relies on Council votes

---

## ðŸŒ… **ROAD TO "ONE-BRAIN, MANY-HATS"**

| Milestone | Proof Metric | Action |
|-----------|--------------|--------|
| Council merges â‰¥30 patches with 0 Guardian veto | veto_count_total steady 0 | Decommission cloud Sonnets |
| Council response p95 < 2s at 50 QPS | council_latency_p95 | Route all build decisions through Round-Table |
| Nightly LoRA Gauntlet shows parity Â±1% with dual-Sonnet diff | LG-210 drift report | Retire external quorum entirely |

**End State**: RTX 4070 "one-brain" Council = central nervous system; external builders = burst capacity only

---

*Generated by Phoenix ðŸ”¥ - Wave 4 Council Democracy MVP*  
*Label: autonomous*  
*Ready for Guardian scaffolding and three-soldier execution* 